# 中星害蟲驅除有限公司｜開發流程與任務清單

> 本文件根據 `spec.md` 第 9 節「開發任務分解（Issue Blueprint）」生成
> 最後更新：2024-12-19

---

## 📋 任務狀態說明

- ⬜ 未開始
- 🟡 進行中
- ✅ 已完成
- ⏸️ 暫停
- ❌ 已取消

**優先級**：
- 🔴 P0：最高優先級（阻塞其他任務）
- 🟠 P1：高優先級（重要功能）
- 🟡 P2：中優先級（一般功能）
- 🟢 P3：低優先級（優化/美化）

---

## 階段一：Foundation（基礎建設）🔴 P0

### 1.1 專案初始化

- [ ] ⬜ 初始化 Next.js 15 專案（App Router）
- [ ] ⬜ 設定 TypeScript 配置
- [ ] ⬜ 安裝核心依賴（React 19, Tailwind CSS）
- [ ] ⬜ 設定 Git 倉庫與分支策略
- [ ] ⬜ 建立 `.env.example` 檔案
- [ ] ⬜ 設定 ESLint 與 Prettier
- [ ] ⬜ 建立 README.md 基礎文檔

### 1.2 設計系統設定

- [ ] ⬜ 安裝並設定 Tailwind CSS
- [ ] ⬜ 設定設計 Tokens（色票、間距、陰影、圓角）
  - [ ] 色票：Primary (#7A5C44)、Secondary (#C8B596)、Accent (#A3B18A) 等
  - [ ] 間距系統（spacing scale）
  - [ ] 陰影系統（shadow scale）
  - [ ] 圓角系統（border radius）
- [ ] ⬜ 設定 CSS Variables（在 `globals.css`）
- [ ] ⬜ 設定字型（Pretendard / Noto Sans TC）
- [ ] ⬜ 建立元件庫文檔（可選，使用 Storybook 或簡單 Markdown）

### 1.3 Layout 元件開發

- [ ] ⬜ 建立 `components/layout/Header.tsx`
  - [ ] LOGO 區域
  - [ ] 主選單（桌面版）
  - [ ] 行動版漢堡選單
  - [ ] CTA 按鈕
  - [ ] 滾動陰影效果
- [ ] ⬜ 建立 `components/layout/Footer.tsx`
  - [ ] NAP 資訊（公司名稱、地址、電話）
  - [ ] 營業時間
  - [ ] 快速連結
  - [ ] 社群連結
  - [ ] 版權資訊
  - [ ] 隱私聲明連結
- [ ] ⬜ 設定容器寬度規範（max-width, padding）
- [ ] ⬜ 建立 Grid 系統（使用 Tailwind Grid）

### 1.4 全域設定

- [ ] ⬜ 安裝並設定 `next-seo`
- [ ] ⬜ 建立全域 SEO 預設值（`app/layout.tsx`）
- [ ] ⬜ 準備 OG 預設圖（`public/og-image.jpg`）
- [ ] ⬜ 設定環境變數結構
- [ ] ⬜ 建立錯誤處理機制（Error Boundary）
- [ ] ⬜ 設定 `sitemap.ts` 與 `robots.ts`（基礎結構）

---

## 階段二：頁面開發 🟠 P1

### 2.1 首頁開發

#### Hero 區塊
- [ ] ⬜ 建立 `components/sections/Hero.tsx`
- [ ] ⬜ 實作標題與副標
- [ ] ⬜ 實作 CTA 按鈕
- [ ] ⬜ 整合背景圖片（使用 `next/image`）
- [ ] ⬜ 響應式設計測試

#### 服務項目區塊
- [ ] ⬜ 建立 `components/sections/ServiceCard.tsx`
- [ ] ⬜ 實作建築種類卡片（居家、文化資產、餐廳及工廠）
- [ ] ⬜ 實作害蟲種類卡片（9 種）
- [ ] ⬜ 實作卡片點擊連結功能
- [ ] ⬜ 響應式網格佈局

#### 優點區塊
- [ ] ⬜ 建立 `components/sections/AdvantageList.tsx`
- [ ] ⬜ 實作優點列表（圖示 + 文字）
- [ ] ⬜ 設計圖示（或使用 icon library）
- [ ] ⬜ 響應式佈局

#### 流程區塊
- [ ] ⬜ 建立流程步驟元件
- [ ] ⬜ 實作 5 個步驟（線上填表 → 現場勘查 → 報價 → 施工 → 後續關懷）
- [ ] ⬜ 設計時間軸或步驟卡片樣式
- [ ] ⬜ 響應式設計

#### 實績預覽
- [ ] ⬜ 建立實績預覽元件
- [ ] ⬜ 顯示 3–6 張精選實績
- [ ] ⬜ 連結至 `/cases` 頁面
- [ ] ⬜ 圖片懶載入

#### FAQ 預覽
- [ ] ⬜ 建立 FAQ 預覽元件
- [ ] ⬜ 顯示 3–5 個常見問題
- [ ] ⬜ 連結至 `/faq` 頁面

#### CTA 區塊
- [ ] ⬜ 建立 CTA 區塊元件
- [ ] ⬜ 實作「立即諮詢」按鈕
- [ ] ⬜ 連結至 `/contact` 頁面

#### 品牌理念/關於我們
- [ ] ⬜ 建立關於我們區塊
- [ ] ⬜ 實作文案與照片展示
- [ ] ⬜ 響應式設計

### 2.2 害蟲介紹頁面 `/pests`

#### 列表頁
- [ ] ⬜ 建立 `app/(marketing)/pests/page.tsx`
- [ ] ⬜ 實作 MDX 檔案讀取邏輯
- [ ] ⬜ 建立篩選/標籤功能
- [ ] ⬜ 實作搜索功能（前端過濾）
- [ ] ⬜ 建立卡片列表佈局
- [ ] ⬜ 實作懸浮視窗（Modal）或直接導航
- [ ] ⬜ 響應式設計

#### 單篇頁面
- [ ] ⬜ 建立 `app/(marketing)/pests/[slug]/page.tsx`
- [ ] ⬜ 實作 MDX 渲染
- [ ] ⬜ 建立頁面結構（Hero、分類、習性、處理方式、自救建議）
- [ ] ⬜ 實作 SEO Meta 標籤（動態）
- [ ] ⬜ 實作相關連結
- [ ] ⬜ 響應式設計

### 2.3 施作實績頁面 `/cases`

#### 列表頁
- [ ] ⬜ 建立 `app/(marketing)/cases/page.tsx`
- [ ] ⬜ 建立 `components/sections/MasonryGrid.tsx`
- [ ] ⬜ 實作瀑布流佈局（3–5 欄響應式）
- [ ] ⬜ 實作篩選功能（類型/區域/害蟲種類）
- [ ] ⬜ 實作卡片元件（縮圖、標題、地區、施工類型、簡述）
- [ ] ⬜ 圖片懶載入
- [ ] ⬜ 響應式設計

#### 燈箱功能
- [ ] ⬜ 建立燈箱元件（Lightbox）
- [ ] ⬜ 實作圖片放大顯示
- [ ] ⬜ 實作左右切換功能
- [ ] ⬜ 實作鍵盤導航（← → 方向鍵）
- [ ] ⬜ 實作關閉功能（ESC 鍵、點擊背景）

#### 單案詳情頁（可選）
- [ ] ⬜ 建立 `app/(marketing)/cases/[id]/page.tsx`
- [ ] ⬜ 實作完整照片集展示
- [ ] ⬜ 實作詳細說明區塊
- [ ] ⬜ 實作施工前後對比
- [ ] ⬜ SEO 優化

### 2.4 常見問題頁面 `/faq`

- [ ] ⬜ 建立 `app/(marketing)/faq/page.tsx`
- [ ] ⬜ 建立 FAQ Accordion 元件
- [ ] ⬜ 實作手風琴展開/收合功能
- [ ] ⬜ 實作搜索功能（前端過濾）
- [ ] ⬜ 實作問題分組顯示
- [ ] ⬜ 實作可展開多個問題
- [ ] ⬜ 響應式設計

### 2.5 聯絡我們頁面 `/contact`

- [ ] ⬜ 建立 `app/(marketing)/contact/page.tsx`
- [ ] ⬜ 建立聯絡資訊區塊（三重總公司、台南分公司）
- [ ] ⬜ 建立 `components/forms/ContactForm.tsx`
- [ ] ⬜ 實作所有表單欄位
  - [ ] 姓名（必填）
  - [ ] 聯絡方式1（必填，下拉 + 輸入）
  - [ ] 聯絡方式2（選填，下拉 + 輸入）
  - [ ] 服務地區（縣市/行政區下拉）
  - [ ] 需求類型（複選 checkbox）
  - [ ] 希望聯絡時段（下拉 + 日期選擇器）
  - [ ] 內容說明（textarea）
  - [ ] 附件上傳（file input，最多 3 張）
  - [ ] 同意條款（checkbox）
- [ ] ⬜ 實作前端驗證邏輯
- [ ] ⬜ 實作即時驗證與錯誤訊息
- [ ] ⬜ 實作 loading 狀態
- [ ] ⬜ 建立成功頁面
- [ ] ⬜ 建立失敗處理
- [ ] ⬜ 響應式設計

### 2.6 隱私權政策頁面 `/privacy`

- [ ] ⬜ 建立 `app/(marketing)/privacy/page.tsx`
- [ ] ⬜ 撰寫隱私權政策內容
- [ ] ⬜ 實作 SEO Meta 標籤
- [ ] ⬜ 響應式設計

---

## 階段三：功能開發 🟠 P1

### 3.1 互動功能

#### Floating 社群按鈕
- [ ] ⬜ 建立 `components/interactive/FloatingSocialButtons.tsx`
- [ ] ⬜ 實作 Line / FB / IG 按鈕
- [ ] ⬜ 設定固定位置（右側/右下角）
- [ ] ⬜ 實作 hover 效果
- [ ] ⬜ 響應式調整（行動版位置）

#### 螞蟻互動動畫背景
- [ ] ⬜ 建立 `components/interactive/AntAnimation.tsx`
- [ ] ⬜ 實作 Canvas 或 SVG 動畫
- [ ] ⬜ 實作隨機螞蟻生成
- [ ] ⬜ 實作鼠標互動邏輯（斷開、排斥效果）
- [ ] ⬜ 性能優化（避免過度渲染）
- [ ] ⬜ 可選：加入開關控制（避免影響性能）

#### 燈箱圖片瀏覽
- [ ] ⬜ （已在 2.3 節完成，此處為確認）

### 3.2 表單與驗證

#### reCAPTCHA v3 / Turnstile 整合
- [ ] ⬜ 選擇驗證服務（reCAPTCHA v3 或 Cloudflare Turnstile）
- [ ] ⬜ 申請 API Key
- [ ] ⬜ 安裝對應套件
- [ ] ⬜ 實作前端整合（自動執行）
- [ ] ⬜ 實作伺服器端驗證
- [ ] ⬜ 測試驗證流程

#### 表單驗證邏輯
- [ ] ⬜ 建立 `lib/validation.ts`
- [ ] ⬜ 實作電話格式驗證
- [ ] ⬜ 實作 Email 格式驗證
- [ ] ⬜ 實作檔案類型/大小驗證
- [ ] ⬜ 整合至表單元件

#### 速率限制實作
- [ ] ⬜ 設定 Upstash Redis（或選擇其他方案）
- [ ] ⬜ 建立 `lib/rate-limit.ts`
- [ ] ⬜ 實作速率限制邏輯（每 IP 每小時最多 5 次）
- [ ] ⬜ 整合至 API 端點
- [ ] ⬜ 測試速率限制

### 3.3 後端功能

#### Nodemailer（或 SendGrid）信件模板
- [ ] ⬜ 選擇郵件服務（Nodemailer 或 SendGrid）
- [ ] ⬜ 建立 `lib/email.ts`
- [ ] ⬜ 設計 HTML 信件模板
- [ ] ⬜ 實作品牌色抬頭
- [ ] ⬜ 實作表單欄位表格
- [ ] ⬜ 實作時間戳記與來源 URL
- [ ] ⬜ 實作附件處理（base64 嵌入或下載連結）
- [ ] ⬜ 測試信件發送

#### 表單 API 端點
- [ ] ⬜ 建立 `app/api/contact/route.ts`
- [ ] ⬜ 實作 POST 方法處理
- [ ] ⬜ 實作伺服器端驗證
- [ ] ⬜ 整合速率限制
- [ ] ⬜ 整合 reCAPTCHA 驗證
- [ ] ⬜ 整合郵件發送
- [ ] ⬜ 實作錯誤處理
- [ ] ⬜ 實作回應格式（200/400/429/500）
- [ ] ⬜ 測試 API 端點

#### 錯誤處理與日誌
- [ ] ⬜ 建立錯誤處理機制
- [ ] ⬜ 實作日誌記錄（可選，使用 Sentry 或其他）
- [ ] ⬜ 實作錯誤通知（可選）

### 3.4 分析與 SEO

#### Analytics（GA4/Umami）整合
- [ ] ⬜ 選擇分析服務（GA4 或 Umami）
- [ ] ⬜ 申請帳號與取得追蹤 ID
- [ ] ⬜ 安裝對應套件
- [ ] ⬜ 建立 Analytics 元件
- [ ] ⬜ 整合至 `app/layout.tsx`
- [ ] ⬜ 測試追蹤功能

#### sitemap/robots 自動化
- [ ] ⬜ 安裝 `next-sitemap`
- [ ] ⬜ 設定 `next-sitemap.config.js`
- [ ] ⬜ 完善 `app/sitemap.ts`
- [ ] ⬜ 完善 `app/robots.ts`
- [ ] ⬜ 測試 sitemap 與 robots 生成
- [ ] ⬜ 提交至 Google Search Console

#### JSON-LD 結構化資料
- [ ] ⬜ 建立 JSON-LD 工具函數
- [ ] ⬜ 實作 PestControlService schema
- [ ] ⬜ 整合至各頁面（首頁、聯絡頁等）
- [ ] ⬜ 使用 Google Rich Results Test 驗證
- [ ] ⬜ 修正任何錯誤

---

## 階段四：內容準備 🟡 P2

### 4.1 MDX 內容

#### 害蟲介紹 MDX（至少 6 篇）
- [ ] ⬜ 建立 MDX 檔案結構
- [ ] ⬜ 撰寫白蟻介紹（`content/pests/termite.mdx`）
- [ ] ⬜ 撰寫蟑螂介紹（`content/pests/cockroach.mdx`）
- [ ] ⬜ 撰寫老鼠介紹（`content/pests/rat.mdx`）
- [ ] ⬜ 撰寫跳蚤介紹（`content/pests/flea.mdx`）
- [ ] ⬜ 撰寫塵蟎介紹（`content/pests/dust-mite.mdx`）
- [ ] ⬜ 撰寫其他害蟲介紹（至少 1 篇）
- [ ] ⬜ 每篇包含：Hero、分類、習性、處理方式、自救建議
- [ ] ⬜ 準備封面圖（每篇至少 1 張）

#### FAQ MDX（至少 20 題）
- [ ] ⬜ 建立 FAQ MDX 檔案結構
- [ ] ⬜ 撰寫流程相關問題（至少 5 題）
- [ ] ⬜ 撰寫安全相關問題（至少 5 題）
- [ ] ⬜ 撰寫價格相關問題（至少 5 題）
- [ ] ⬜ 撰寫服務相關問題（至少 5 題）
- [ ] ⬜ 分類與標籤設定

### 4.2 圖片資產

#### 實績照片
- [ ] ⬜ 收集實績照片（至少 12 張）
- [ ] ⬜ 確認照片授權
- [ ] ⬜ 圖片壓縮與優化（單張 < 200KB）
- [ ] ⬜ 轉換為 AVIF/WebP 格式
- [ ] ⬜ 建立實績 MDX/JSON 檔案
- [ ] ⬜ 填寫實績資訊（標題、地區、施工類型、簡述）

#### 其他圖片
- [ ] ⬜ Hero 背景圖（1920×1080px，壓縮後）
- [ ] ⬜ 服務項目圖示（SVG 或 PNG）
- [ ] ⬜ 流程步驟圖示
- [ ] ⬜ OG 分享圖（1200×630px）
- [ ] ⬜ Favicon（多尺寸）
- [ ] ⬜ 關於我們照片

---

## 階段五：測試與優化 🟢 P3

### 5.1 功能測試

- [ ] ⬜ 測試所有頁面路由
- [ ] ⬜ 測試表單提交流程
- [ ] ⬜ 測試郵件發送
- [ ] ⬜ 測試速率限制
- [ ] ⬜ 測試 reCAPTCHA 驗證
- [ ] ⬜ 測試響應式設計（多裝置）
- [ ] ⬜ 測試瀏覽器相容性
- [ ] ⬜ 測試 SEO 標籤
- [ ] ⬜ 測試 JSON-LD 結構化資料
- [ ] ⬜ 測試圖片懶載入
- [ ] ⬜ 測試燈箱功能
- [ ] ⬜ 測試 FAQ 搜索功能

### 5.2 性能優化

- [ ] ⬜ 使用 Lighthouse 測試性能
- [ ] ⬜ 優化首屏載入時間（目標 < 3 秒）
- [ ] ⬜ 優化 LCP（目標 < 2.5 秒）
- [ ] ⬜ 檢查並優化 JavaScript Bundle 大小
- [ ] ⬜ 優化圖片尺寸與格式
- [ ] ⬜ 啟用 HTTP/2 與 HTTP/3
- [ ] ⬜ 設定 CDN 快取

### 5.3 安全性檢查

- [ ] ⬜ 檢查 HTTPS 設定
- [ ] ⬜ 檢查安全標頭（CSP、X-Frame-Options 等）
- [ ] ⬜ 檢查環境變數安全性
- [ ] ⬜ 檢查輸入驗證
- [ ] ⬜ 檢查檔案上傳安全性
- [ ] ⬜ 進行安全掃描（可選）

### 5.4 SEO 優化

- [ ] ⬜ 檢查所有頁面 Meta 標籤
- [ ] ⬜ 檢查 OG 標籤
- [ ] ⬜ 檢查 sitemap 與 robots.txt
- [ ] ⬜ 提交至 Google Search Console
- [ ] ⬜ 檢查 JSON-LD 結構化資料
- [ ] ⬜ 檢查內鏈結構
- [ ] ⬜ 檢查圖片 alt 屬性

---

## 階段六：部署與上線 🔴 P0

### 6.1 部署準備

- [ ] ⬜ 設定 Vercel 專案
- [ ] ⬜ 設定環境變數（生產環境）
- [ ] ⬜ 設定自訂網域
- [ ] ⬜ 設定 DNS 記錄
- [ ] ⬜ 測試 Preview 部署
- [ ] ⬜ 測試 Production 部署

### 6.2 上線前檢查

- [ ] ⬜ 執行完整功能測試
- [ ] ⬜ 執行性能測試（Lighthouse）
- [ ] ⬜ 執行安全性檢查
- [ ] ⬜ 檢查所有連結
- [ ] ⬜ 檢查表單功能
- [ ] ⬜ 檢查郵件發送
- [ ] ⬜ 檢查 Analytics 追蹤
- [ ] ⬜ 檢查錯誤監控（如有）

### 6.3 上線後

- [ ] ⬜ 監控網站運行狀態
- [ ] ⬜ 檢查錯誤日誌
- [ ] ⬜ 檢查 Analytics 數據
- [ ] ⬜ 收集用戶反饋
- [ ] ⬜ 準備維護計劃

---

## 📝 開發注意事項

### 開發順序建議

1. **先完成 Foundation**：確保基礎建設穩固
2. **再開發頁面**：從首頁開始，逐步完成其他頁面
3. **接著實作功能**：表單、API、互動功能
4. **最後準備內容**：MDX 內容與圖片資產
5. **測試與優化**：全面測試與性能優化
6. **部署上線**：正式部署與監控

### 開發環境設定

```bash
# 安裝依賴
npm install

# 開發模式
npm run dev

# 建置
npm run build

# 啟動生產環境
npm start
```

### 環境變數設定

參考 `spec.md` 第 1 節的環境變數需求，建立 `.env.local` 檔案。

### 版本控制

- 使用 Git Flow 工作流程
- 主要分支：`main`（生產環境）
- 功能分支：`feature/功能名稱`
- 提交訊息格式：`feat: 功能描述` 或 `fix: 修復描述`

---

## 📊 進度追蹤

**整體進度**：0% ⬜⬜⬜⬜⬜⬜⬜⬜⬜⬜

- 階段一（Foundation）：0%
- 階段二（頁面開發）：0%
- 階段三（功能開發）：0%
- 階段四（內容準備）：0%
- 階段五（測試與優化）：0%
- 階段六（部署與上線）：0%

---

**最後更新時間**：2024-12-19
**維護者**：開發團隊

